<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Understand template type deduction.Using a function template as looking like this:12template&amp;lt;typename T&amp;gt;void f(ParamType param); A call can look like this:1f(expr); The goal is to deduce T and P">
<meta name="keywords" content="C++11&#x2F;C++14">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective Modern C++ Item 01">
<meta property="og:url" content="http://yoursite.com/effective-modern-c-item-01/index.html">
<meta property="og:site_name" content="ShangKuei&#39;s Road Trip">
<meta property="og:description" content="Understand template type deduction.Using a function template as looking like this:12template&amp;lt;typename T&amp;gt;void f(ParamType param); A call can look like this:1f(expr); The goal is to deduce T and P">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-04T06:21:18.645Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Effective Modern C++ Item 01">
<meta name="twitter:description" content="Understand template type deduction.Using a function template as looking like this:12template&amp;lt;typename T&amp;gt;void f(ParamType param); A call can look like this:1f(expr); The goal is to deduce T and P">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Effective Modern C++ Item 01</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/stack-overflow/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/effective-modern-c-item-01/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/effective-modern-c-item-01/&text=Effective Modern C++ Item 01"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/effective-modern-c-item-01/&is_video=false&description=Effective Modern C++ Item 01"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Effective Modern C++ Item 01&body=Check out this article: http://yoursite.com/effective-modern-c-item-01/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/effective-modern-c-item-01/&name=Effective Modern C++ Item 01&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Understand-template-type-deduction"><span class="toc-number">1.</span> <span class="toc-text">Understand template type deduction.</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-1-ParamType-is-a-reference-or-pointer-but-not-a-universal-reference"><span class="toc-number">1.1.</span> <span class="toc-text">Case 1: ParamType is a reference or pointer, but not a universal reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples"><span class="toc-number">1.1.1.</span> <span class="toc-text">Examples.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-2-ParamType-is-a-universal-reference"><span class="toc-number">1.2.</span> <span class="toc-text">Case 2: ParamType is a universal reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Example"><span class="toc-number">1.2.1.</span> <span class="toc-text">Example.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-3-ParamType-is-neither-a-pointer-nor-a-reference"><span class="toc-number">1.3.</span> <span class="toc-text">Case 3: ParamType is neither a pointer nor a reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">Examples.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Array-arguments"><span class="toc-number">1.4.</span> <span class="toc-text">Array arguments.</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#trick"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">trick</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-Arguments"><span class="toc-number">1.5.</span> <span class="toc-text">Function Arguments</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Things-to-remember"><span class="toc-number">2.</span> <span class="toc-text">Things to remember</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Effective Modern C++ Item 01
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ShangKuei's Road Trip</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-06-26T06:37:01.000Z" itemprop="datePublished">2018-06-26</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/C-11-C-14/">C++11/C++14</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="Understand-template-type-deduction"><a href="#Understand-template-type-deduction" class="headerlink" title="Understand template type deduction."></a>Understand <code>template</code> type deduction.</h1><p>Using a function template as looking like this:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(ParamType param)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>A call can look like this:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(expr);</span><br></pre></td></tr></table></figure></p>
<p>The goal is to deduce <code>T</code> and <code>ParamType</code> from <code>expr</code>.</p>
<h2 id="Case-1-ParamType-is-a-reference-or-pointer-but-not-a-universal-reference"><a href="#Case-1-ParamType-is-a-reference-or-pointer-but-not-a-universal-reference" class="headerlink" title="Case 1: ParamType is a reference or pointer, but not a universal reference."></a>Case 1: <code>ParamType</code> is a <code>reference</code> or <code>pointer</code>, but not a <code>universal reference</code>.</h2><p>Type ducduction works like this:</p>
<ul>
<li>If <code>expr</code>‘s type is a <code>reference</code>, ignore the <code>reperence</code> part.</li>
<li>The pattern-match <code>expr</code>‘s type against <code>ParamType</code> to determine T.</li>
</ul>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples."></a>Examples.</h3><ol>
<li><p>For example,</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T&amp; param)</span></span>;</span><br></pre></td></tr></table></figure>
<p> Variable declarations and deduced types are as follows.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">27</span>;</span><br><span class="line">f(x);   <span class="comment">// T: int           param: int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> cx = x;</span><br><span class="line">f(cx);  <span class="comment">// T: const int     param: const int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>&amp; rx = x;</span><br><span class="line">f(rx);  <span class="comment">// T: const int     param: const int&amp;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Change the type of <code>f</code>‘s parameter from <code>T&amp;</code> to <code>const T&amp;</code>.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">const</span> T&amp; param)</span></span>;</span><br></pre></td></tr></table></figure>
<p> Variable declarations and deduced types are as follows.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">27</span>;</span><br><span class="line">f(x);   <span class="comment">// T: int           param: const int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> cx = x;</span><br><span class="line">f(cx);  <span class="comment">// T: const int     param: const int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>&amp; rx = x;</span><br><span class="line">f(rx);  <span class="comment">// T: const int     param: const int&amp;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>If <code>parm</code> were a pointer instead of a reference.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T* param)</span></span>;</span><br></pre></td></tr></table></figure>
<p> Variable declarations and deduced types are as follows.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">27</span>;</span><br><span class="line">f(&amp;x);   <span class="comment">// T: int          param: int*</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *px = &amp;x;</span><br><span class="line">f(px);  <span class="comment">// T: const int     param: const int*</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Case-2-ParamType-is-a-universal-reference"><a href="#Case-2-ParamType-is-a-universal-reference" class="headerlink" title="Case 2: ParamType is a universal reference."></a>Case 2: <code>ParamType</code> is a <code>universal reference</code>.</h2><p>The complete story about <a href="/effective-modern-c-item-24.md"><code>universal reference</code></a></p>
<p>Here is the type deduction:</p>
<ol>
<li>If <code>expr</code> is an <code>lvalue</code>, both <code>T</code> and <code>ParamType</code> are deduced to be <code>lvalue reference</code>.</li>
<li>If <code>expr</code> is an <code>rvalue</code>, the normal rules apply.</li>
</ol>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example."></a>Example.</h3><p>For example,<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T&amp;&amp; param)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>Variable declarations and deduced types are as follows.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">27</span>;</span><br><span class="line">f(x);   <span class="comment">// T: int&amp;          param: int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> cx = x;</span><br><span class="line">f(cx);  <span class="comment">// T: const int&amp;    param: const int&amp;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>&amp; rx = x;</span><br><span class="line">f(rx);  <span class="comment">// T: const int&amp;    param: const int&amp;</span></span><br><span class="line"></span><br><span class="line">f(<span class="number">27</span>);  <span class="comment">// T: int           param: int&amp;&amp;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Case-3-ParamType-is-neither-a-pointer-nor-a-reference"><a href="#Case-3-ParamType-is-neither-a-pointer-nor-a-reference" class="headerlink" title="Case 3: ParamType is neither a pointer nor a reference."></a>Case 3: <code>ParamType</code> is neither a <code>pointer</code> nor a <code>reference</code>.</h2><p>That means that <code>param</code> will be a copy of whatever is passed in.</p>
<p>How <code>T</code> is deduced from <code>expr</code>:</p>
<ol>
<li>If <code>expr</code>‘s type is a <code>reference</code>, ignore the <code>reference</code> part.</li>
<li>If <code>expr</code> is <code>const</code> or <code>volatile</code>(<a href="/effective-modern-c-item-40.md">detail</a>), ignore that, too.</li>
</ol>
<h3 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples."></a>Examples.</h3><p>For example,<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T param)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>Variable declarations and deduced types are as follows.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">27</span>;</span><br><span class="line">f(x);   <span class="comment">// T: int           param: int</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> cx = x;</span><br><span class="line">f(cx);  <span class="comment">// T: int           param: int</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>&amp; rx = x;</span><br><span class="line">f(rx);  <span class="comment">// T: int           param: int</span></span><br></pre></td></tr></table></figure></p>
<p>Consider rhe case where <code>expr</code> is a <code>const</code> pointer to a <code>const</code> object, and <code>expr</code>is passed to a by-value<code>param</code>:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T param)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>Variable declarations and deduced types are as follows.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* <span class="keyword">const</span> ptr = <span class="string">"fun with pointer?"</span>;</span><br><span class="line">f(ptr); <span class="comment">// T: const char*   param: const char*</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Array-arguments"><a href="#Array-arguments" class="headerlink" title="Array arguments."></a>Array arguments.</h2><p>Consider this variables:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> name[] = <span class="string">"A decay test"</span>; <span class="comment">// type is const char[13]</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* ptr = name;             <span class="comment">// array decays to pointer</span></span><br></pre></td></tr></table></figure></p>
<p>Variable declarations and deduced types are as follows.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T param)</span></span>;</span><br><span class="line"></span><br><span class="line">f(name);    <span class="comment">// T: const char*   param: const char*</span></span><br></pre></td></tr></table></figure></p>
<p>But if we modify the template <code>f</code> to take its argument by reference:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T&amp; param)</span></span>;</span><br><span class="line"></span><br><span class="line">f(name);    <span class="comment">// T: const char[13]   param: const char(&amp;)[13]</span></span><br></pre></td></tr></table></figure></p>
<h4 id="trick"><a href="#trick" class="headerlink" title="trick"></a>trick</h4><p>Take advantage of that:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="built_in">std</span>::<span class="keyword">size_t</span> N&gt;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> arraySize(T (&amp;)[N]) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The detail of <a href="/effective-modern-c-item-14.md"><code>noexcept</code></a><br>The detail of <a href="/effective-modern-c-item-15.md"><code>constexpr</code></a></p>
<h2 id="Function-Arguments"><a href="#Function-Arguments" class="headerlink" title="Function Arguments"></a>Function Arguments</h2><p>Function types can decay into function pointers:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunc</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">double</span>)</span></span>;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">(T param)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">(T&amp; param)</span></span>;</span><br><span class="line"></span><br><span class="line">f1(someFunc);   <span class="comment">// param: void (*)(int, double)</span></span><br><span class="line">f2(someFunc);   <span class="comment">// param: void (&amp;)(int, double)</span></span><br></pre></td></tr></table></figure>
<p><a href="/effective-modern-c-item-4.md">Show deduction result by compiler</a></p>
<h1 id="Things-to-remember"><a href="#Things-to-remember" class="headerlink" title="Things to remember"></a>Things to remember</h1><ul>
<li>During template type deduction, arguments that are <code>references</code> are treated as non-references, i.e., their reference-ness is ignored.</li>
<li>When deducing types for <code>universal reference</code> parameters, <code>lvalue</code> arguments get special treatment.</li>
<li>When deducing types for <code>by-value</code> parameters, <code>const</code> and <code>volatile</code> arguments are treated as <code>non-const</code> and <code>non-volatile</code>.</li>
<li>During <code>template</code> type deduction, arguments that are array or function names decay to <code>pointers</code>, unless they’re used to initialize <code>references</code>.</li>
</ul>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Understand-template-type-deduction"><span class="toc-number">1.</span> <span class="toc-text">Understand template type deduction.</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-1-ParamType-is-a-reference-or-pointer-but-not-a-universal-reference"><span class="toc-number">1.1.</span> <span class="toc-text">Case 1: ParamType is a reference or pointer, but not a universal reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples"><span class="toc-number">1.1.1.</span> <span class="toc-text">Examples.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-2-ParamType-is-a-universal-reference"><span class="toc-number">1.2.</span> <span class="toc-text">Case 2: ParamType is a universal reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Example"><span class="toc-number">1.2.1.</span> <span class="toc-text">Example.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case-3-ParamType-is-neither-a-pointer-nor-a-reference"><span class="toc-number">1.3.</span> <span class="toc-text">Case 3: ParamType is neither a pointer nor a reference.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Examples-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">Examples.</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Array-arguments"><span class="toc-number">1.4.</span> <span class="toc-text">Array arguments.</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#trick"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">trick</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-Arguments"><span class="toc-number">1.5.</span> <span class="toc-text">Function Arguments</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Things-to-remember"><span class="toc-number">2.</span> <span class="toc-text">Things to remember</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/effective-modern-c-item-01/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/effective-modern-c-item-01/&text=Effective Modern C++ Item 01"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/effective-modern-c-item-01/&is_video=false&description=Effective Modern C++ Item 01"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Effective Modern C++ Item 01&body=Check out this article: http://yoursite.com/effective-modern-c-item-01/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/effective-modern-c-item-01/&title=Effective Modern C++ Item 01"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/effective-modern-c-item-01/&name=Effective Modern C++ Item 01&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 ShangKuei
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Mermaid -->

<script src='https://unpkg.com/mermaid@8.0.0-rc.8/dist/mermaid.min.js'></script>
<script>
  if (window.mermaid) {
    mermaid.initialize({theme: 'default'});
  }
</script>

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


